KISSY.add("utils/msgBox/index",function(a){function f(b){var c=this;if(!(c instanceof f))return new f(b);c.msgBoxImagePath="http://cdn.huanleguang.com/img/common/msgBox/",c.isShown=!1,c.divMsgBox,c.divMsgBoxContent,c.divMsgBoxImage,c.divMsgBoxButtons,c.divMsgBoxBackGround;var d=typeof b;c.defaults={content:d=="string"?b:"Message",title:"Warning",type:"alert",dialogType:"dialog",autoClose:!1,timeOut:0,showButtons:!0,buttons:[{value:"Ok"}],inputs:[{type:"text",name:"userName",header:"User Name"},{type:"password",name:"password",header:"Password"}],success:function(a){},beforeShow:function(){},afterShow:function(){},beforeClose:function(){},afterClose:function(){},opacity:.1},b=d=="string"?c.defaults:b;if(b.type!=null&&b.dialogType=="dialog")switch(b.type){case"alert":b.title=b.title==null?"\u8b66\u544a":b.title;break;case"info":b.title=b.title==null?"\u6d88\u606f":b.title;break;case"error":b.title=b.title==null?"\u9519\u8bef\u63d0\u793a":b.title;break;case"confirm":b.title=b.title==null?"\u6e29\u99a8\u63d0\u793a":b.title,b.buttons=b.buttons==null?[{value:"\u786e\u8ba4"},{value:"\u53d6\u6d88"},{value:"\u53d6\u6d88"}]:b.buttons;break;case"prompt":b.title=b.title==null?"\u63d0\u793a":b.title,b.buttons=b.buttons==null?[{value:"\u767b\u5f55"},{value:"\u53d6\u6d88"}]:b.buttons;break;default:image="alert.png"}b.timeOut=b.timeOut==null?b.content==null?500:b.content.length*70:b.timeOut,c.options=a.merge(c.defaults,b||{}),c.options.autoClose&&setTimeout(function(){c.hide()},c.options.timeOut),c.image="";switch(c.options.type&&c.options.dialogType=="dialog"){case"alert":image="alert.png";break;case"info":image="info.png";break;case"error":image="error.png";break;case"confirm":image="confirm.png";break;default:image="alert.png"}c._createHtml()}var b=a.DOM,c=a.Event,d=document,e=a.all;return a.mix(f.prototype,{_createHtml:function(){var d=a.all,e=this,f=e.options,g="msgBox"+(new Date).getTime(),h=g,i=g+"BackGround";if(f.dialogType=="dialog"){var j=g+"Content",k=g+"Image",l=g+"Buttons",m="";a.each(e.options.buttons,function(a,b){m+='<input class="msgButton" type="button" name="'+a.value+'" value="'+a.value+'" />'});var n="";a.each(e.options.inputs,function(a,b){var c=a.type;c=="checkbox"||c=="radiobutton"?n+='<div class="msgInput"><input type="'+a.type+'" name="'+a.name+'" '+(a.checked==null?"":"checked ='"+a.checked+"'")+' value="'+(typeof a.value=="undefined"?"":a.value)+'" />'+"<text>"+a.header+"</text>"+"</div>":n+='<div class="msgInput"><span class="msgInputHeader">'+a.header+"<span>"+'<input type="'+a.type+'" name="'+a.name+'" value="'+(typeof a.value=="undefined"?"":a.value)+'" />'+"</div>"});var o="<div id="+i+' class="msgBoxBackGround"></div>',p='<div class="msgBoxTitle">'+e.options.title+"</div>",q='<div class="msgBoxContainer"><div id='+k+' class="msgBoxImage"><img src="'+e.msgBoxImagePath+image+'"/></div><div id='+j+' class="msgBoxContent"><p><span>'+f.content+"</span></p></div></div>",r="<div id="+l+' class="msgBoxButtons">'+m+"</div>",s='<div class="msgBoxInputs">'+n+"</div>";f.type=="prompt"?(d("html").append(o+"<div id="+h+' class="msgBox">'+p+"<div>"+q+(f.showButtons?r+"</div>":"</div>")+"</div>"),e.divMsgBox=d("#"+h),e.divMsgBoxContent=d("#"+j),e.divMsgBoxImage=d("#"+k),e.divMsgBoxButtons=d("#"+l),e.divMsgBoxBackGround=d("#"+i),e.divMsgBoxImage.remove(),e.divMsgBoxButtons.css({"text-align":"center","margin-top":"5px"}),e.divMsgBoxContent.css({width:"100%",height:"100%"}),e.divMsgBoxContent.html(s)):(d("html").append(o+"<div id="+h+' class="msgBox">'+p+"<div>"+q+(f.showButtons?r+"</div>":"</div>")+"</div>"),e.divMsgBox=d("#"+h),e.divMsgBoxContent=d("#"+j),e.divMsgBoxImage=d("#"+k),e.divMsgBoxButtons=d("#"+l),e.divMsgBoxBackGround=d("#"+i)),e.show(),c.on(e.divMsgBoxBackGround,"click",function(a){!e.options.showButtons||e.options.autoClose?e.hide():e.getFocus()}),c.on(b.query(".msgButton"),"click",function(c){c.preventDefault();var f=d(this).val();if(e.options.type!="prompt")e.options.success(f);else{var g=[];a.each(b.query(".msgInput"),function(a){var b=d(a).attr("name"),c=d(a).val(),e=d(a).attr("type");e=="checkbox"||e=="radiobutton"?g.push({name:b,value:c,checked:d(a).attr("checked")}):g.push({name:b,value:c})}),e.options.success(f,g)}e.hide()})}else if(f.dialogType=="loading"){var o="<div id="+i+' class="msgBoxBackGround"></div>';f.content=f.content==null?"\u7cfb\u7edf\u5904\u7406\u4e2d\uff0c\u8bf7\u7a0d\u7b49...":f.content,d("html").append(o+"<div id="+h+' class="messages-prompt"><div class="fbloader"><img  src="http://img.huanleguang.com/hlg//fbloader.gif" width="16" height="11" /></div><div class="mini_dialog_content">'+f.content+"</div></div>"),e.divMsgBox=d("#"+h),e.divMsgBoxBackGround=d("#"+i),e.show()}else if(f.dialogType=="msg"){e.image="";switch(f.type){case"alert":var q='<ul id="noty_top_layout_container" class="" style="top: 0px;left: 20%;position: fixed;_position:absolute;_left:expression(eval(document.documentElement.scrollLeft+20%));_top:expression(eval(document.documentElement.scrollTop));width: 60%;height: auto;margin: 0px;padding: 0px;list-style-type: none;z-index: 9999999;"><li style="overflow: hidden; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==); background-attachment: scroll; background-color: rgb(255, 255, 255); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; border-bottom-width: 2px; border-bottom-style: solid; border-color: rgb(204, 204, 204); border-left-width: 2px; border-left-style: solid; border-right-width: 2px; border-right-style: solid; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px; color: rgb(68, 68, 68); cursor: pointer; background-position: 0% 0%; background-repeat: repeat no-repeat;"><div class="noty_bar" ><div class="noty_message" style="font-size: 13px; line-height: 16px; text-align: center; padding: 8px 10px 9px; width: auto; position: relative;"><span class="noty_text">'+f.content+"</span></div></div></li></ul>";break;case"info":case"success":var q='<ul id="noty_top_layout_container" class="" style="top: 0px;left: 20%;position: fixed;_position:absolute;_left:expression(eval(document.documentElement.scrollLeft+20%));_top:expression(eval(document.documentElement.scrollTop));width: 60%;height: auto;margin: 0px;padding: 0px;list-style-type: none;z-index: 9999999;"><li style="overflow: hidden; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==); background-attachment: scroll; background-color: rgb(144, 238, 144); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; border-bottom-width: 2px; border-bottom-style: solid; border-color: rgb(80, 194, 78); border-left-width: 2px; border-left-style: solid; border-right-width: 2px; border-right-style: solid; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px; color: rgb(0, 100, 0); cursor: pointer; background-position: 0% 0%; background-repeat: repeat no-repeat;"><div class="noty_bar" ><div class="noty_message" style="font-size: 13px; line-height: 16px; text-align: center; padding: 8px 10px 9px; width: auto; position: relative;"><span class="noty_text">'+f.content+"</span></div></div></li>";break;case"error":var q='<ul id="noty_top_layout_container" class="" style="top: 0px;left: 20%;position: fixed;_position:absolute;_left:expression(eval(document.documentElement.scrollLeft+20%));_top:expression(eval(document.documentElement.scrollTop));width: 60%;height: auto;margin: 0px;padding: 0px;list-style-type: none;z-index: 9999999;"><li style="overflow: hidden; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==); background-attachment: scroll; background-color: red; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; border-bottom-width: 2px; border-bottom-style: solid; border-color: rgb(139, 0, 0); border-left-width: 2px; border-left-style: solid; border-right-width: 2px; border-right-style: solid; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px; color: rgb(255, 255, 255); cursor: pointer; background-position: 0% 0%; background-repeat: repeat no-repeat;"><div class="noty_bar" ><div class="noty_message" style="font-size: 13px; line-height: 16px; text-align: center; padding: 8px 10px 9px; width: auto; position: relative; font-weight: bold;"><span class="noty_text">'+f.content+"</span>"+"</div></div></li></ul>";break;default:var q='<ul id="noty_top_layout_container" class="" style="top: 0px;left: 20%;position: fixed;_position:absolute;_left:expression(eval(document.documentElement.scrollLeft+20%));_top:expression(eval(document.documentElement.scrollTop));width: 60%;height: auto;margin: 0px;padding: 0px;list-style-type: none;z-index: 9999999;"><li style="overflow: hidden; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==); background-attachment: scroll; background-color: rgb(255, 255, 255); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; border-bottom-width: 2px; border-bottom-style: solid; border-color: rgb(204, 204, 204); border-left-width: 2px; border-left-style: solid; border-right-width: 2px; border-right-style: solid; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px; color: rgb(68, 68, 68); cursor: pointer; background-position: 0% 0%; background-repeat: repeat no-repeat;"><div class="noty_bar"><div class="noty_message" style="font-size: 13px; line-height: 16px; text-align: center; padding: 8px 10px 9px; width: auto; position: relative;"><span class="noty_text">'+f.content+"</span></div></div></li>"}d("html").append("<div id="+h+' class="">'+q+"</div>"),e.divMsgBox=d("#"+h),e.show(),c.on(e.divMsgBox,"click",function(a){e.hide()})}},show:function(){var b=a.all,c=this;if(c.isShown)return;var d=c.options;if(d.dialogType=="dialog"){var e=c.center(),f=e.top,g=e.left;c.divMsgBox.css({opacity:0,top:f-50,left:g}),c.divMsgBox.css("background-image","url('"+c.msgBoxImagePath+"msgBoxBackGround.png')"),c.divMsgBoxBackGround.css({opacity:d.opacity}),c.options.beforeShow(),c.divMsgBoxBackGround.css({width:b(document).width(),height:c.getDocHeight()}),b(c.divMsgBoxId+","+c.divMsgBoxBackGroundId).fadeIn(0),c.divMsgBox.animate({opacity:1,top:f,left:g},.2),setTimeout(c.options.afterShow,200)}else if(d.dialogType=="loading"){var e=c.center(),f=e.top,g=e.left;c.divMsgBoxBackGround.css({opacity:d.opacity}),c.divMsgBoxBackGround.css({width:b(document).width(),height:c.getDocHeight()}),c.divMsgBox.css({top:f,left:g},.2)}else d.dialogType=="msg"&&(c.divMsgBox.css({opacity:0,top:f-50}),c.divMsgBox.animate({opacity:1,top:0},.2));c.isShown=!0;if(d.dialogType=="dialog"||d.dialogType=="loading"){b(window).on("resize",function(a){if(c.isShown){var b=c.center(),d=b.top,e=b.left;c.divMsgBox.css({top:d,left:e})}});function h(){if(c.isShown){var a=c.center(),b=a.top,d=a.left;c.divMsgBox.css({top:b,left:d})}}window.onscroll=h}},center:function(){var a=this,c,d,e=b.get("#"+a.divMsgBox.attr("id")),f=e.offsetWidth,g=e.offsetHeight;viewPortWidth=b.viewportWidth(),viewPortHeight=b.viewportHeight(),f<viewPortWidth?c=viewPortWidth/2-f/2+b.scrollLeft():c=b.scrollLeft(),g<viewPortHeight?d=viewPortHeight/2-g/2+b.scrollTop():d=b.scrollTop();var h={top:d,left:c};return h},hide:function(){var b=a.all,c=this;if(!c.isShown)return;if(c.options.dialogType=="dialog"||c.options.dialogType=="loading"){var d=c.center().top,e=c.center().left;c.options.beforeClose(),c.divMsgBox.animate({opacity:0,top:d-50,left:e},.2),c.divMsgBoxBackGround.fadeOut(300),setTimeout(function(){c.divMsgBox.remove(),c.divMsgBoxBackGround.remove()},300),setTimeout(c.options.afterClose,300)}else c.divMsgBox.animate({opacity:0,top:d-50},.5),setTimeout(function(){c.divMsgBox.remove()},300);c.isShown=!1},getDocHeight:function(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))},getFocus:function(){var a=this;a.divMsgBox.fadeOut(.2).fadeIn(.2)}}),f}),KISSY.add("page/acountInit",function(a,b,c){var d=function(a){alert(a)},e="";(new b).setURI(buyDetailUrl).setMethod("GET").setHandle(d).setData(e).send(),new c("asd")},{requires:["utils/asyncRequest/index","utils/msgBox/index"]}); 