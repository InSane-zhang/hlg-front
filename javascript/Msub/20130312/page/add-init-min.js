KISSY.add("page/add-init",function(a){var b=KISSY.DOM,c=a.Event;return subControl={paginator:null,msg:null,NameError:!1,init:function(){c.on("#J_BtnPublish","click",function(a){subControl.save()})},PromoNameAction:function(a){var c=H.util.isNull(a),d=c[0],e=c[1];return d?(b.addClass("#J_PlanName","text-error"),b.html("#J_PromoNameError",e),b.hide("#J_PromoNameRequired"),b.hide("#J_PromoNameSucess"),b.show("#J_PromoNameError"),subControl.NameError=!0):(b.removeClass("#J_PlanName","text-error"),b.hide("#J_PromoNameRequired"),b.show("#J_PromoNameSucess"),b.hide("#J_PromoNameError"),subControl.NameError=!1)},save:function(){subControl.msg=new H.widget.msgBox({title:"",dialogType:"loading",content:"\u6b63\u5728\u4fdd\u5b58\u4e2d\uff0c\u8bf7\u7a0d\u5019"});var a=b.val("#J_PlanName");if(subControl.NameError==1){subControl.msg.hide();return}ParamsErrorBox=KISSY.one("#J_ParamsErrorBox");var c=function(a){subControl.msg.hide(),ParamsErrorBox.hide(),ParamsSucessBox=KISSY.one("#J_ParamsSucessBox"),b.html("#J_ParamsSucessMsg","\u6210\u529f\u521b\u5efa\u6d3b\u52a8\uff01"),ParamsSucessBox.css("display")==="none"&&ParamsSucessBox.slideDown(),b.scrollIntoView("#J_ParamsSucessMsg",window),window.location.href=sucessUrl},d=function(a){subControl.msg.hide(),b.html("#J_ParamsErrorMsg",a.desc),ParamsErrorBox.css("display")==="none"&&ParamsErrorBox.slideDown(),b.scrollIntoView("#J_ParamsErrorMsg",window)},e="";(new H.widget.asyncRequest).setURI(saveRoleUrl).setMethod("POST").setForm("#J_subform").setHandle(c).setErrorHandle(d).setData(e).send()},checkForm:function(){var a=b.filter(b.query("input"),function(a){if(a.type=="checkbox"&&b.hasClass(a,"J_checkForm"))return!0});KISSY.each(a,function(a){a.checked==0&&(a.checked=!0,b.val(a,0))})},backCheckForm:function(){var a=b.filter(b.query("input"),function(a){if(a.type=="checkbox"&&b.hasClass(a,"J_checkForm"))return!0});KISSY.each(a,function(a){var c=b.val(a);c==1?a.checked=!0:(a.checked=!1,b.val(a,1))})}}},{requires:[]}); 