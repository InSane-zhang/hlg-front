KISSY.add("utils/showPages/index",function(a){function e(a){var b=this;if(!(b instanceof e))return new e(a);this.pageNum=4,this.name=a,this.page=1,this.pageCount=200,this.argName="page"}var b=a.DOM,c=a.Event,d=document;return a.mix(e.prototype,{jump:function(){return undefined},checkPages:function(){isNaN(parseInt(this.page))&&(this.page=1),isNaN(parseInt(this.pageCount))&&(this.pageCount=1),this.page<1&&(this.page=1),this.pageCount<1&&(this.pageCount=1),this.page>this.pageCount&&(this.page=this.pageCount),this.page=parseInt(this.page),this.pageCount=parseInt(this.pageCount)},_createHtml:function(a){var b=this,c="",d=this.page-1,e=this.page+1;if(a==""||typeof a=="undefined")a=1;switch(a){case 1:c+='<div class="page-bottom"> <div class="sabrosus">',c+='<font class="number">',c+="\u5171"+this.pageCount+"\u9875&nbsp;",c+='<input style="" type="text"  class="page-input" id="pageInput'+b.name+'"  value="\u9875\u7801" onkeypress="return window.'+b.name+".formatInputPage(event);\" onfocus=\"this.className='page-input page-input-text-on ';if(this.value=='\u9875\u7801'){this.value = '';}\" onblur=\"this.className='page-input';if(this.value==''){this.value = '\u9875\u7801'}\">",c+='<input type="button" value="Go" class="btm-go" onclick="javascript:var page = document.getElementById(\'pageInput'+b.name+"').value; if(isNaN(Number(page))|| Number(page)==0) { var turnTo = 1;} else if(page>"+this.pageCount+"){ var turnTo = "+this.pageCount+";} else{var turnTo = page;}  window."+b.name+'.toPage(turnTo);" >',c+="</font>",d<1?c+='<span class="pre-none page-pic-no"></span>':c+='<span title="\u4e0a\u4e00\u9875" class="pre page-pic-no" onclick="'+b.name+".toPage("+d+');"></span>',e>this.pageCount?c+='<span class="next-none page-pic-no"></span>':c+='<span title="\u4e0b\u4e00\u9875" class="next page-pic-no" onclick="'+b.name+".toPage("+e+');"></span>',c+='<div style="clear:both"></div></div></div> ';break;case 2:if(this.pageCount>1){c+='<div class="page-bottom"> <div class="sabrosus">',this.pageCount>5&&(c+='<font class="number">',c+="\u5171"+this.pageCount+"\u9875&nbsp;",c+='<input style="" type="text"  class="page-input" id="pageInput'+b.name+'"  value="\u9875\u7801" onkeypress="return window.'+b.name+".formatInputPage(event);\" onfocus=\"this.className='page-input page-input-text-on ';if(this.value=='\u9875\u7801'){this.value = '';}\" onblur=\"this.className='page-input';if(this.value==''){this.value = '\u9875\u7801'}\">",c+='<input type="button" value="Go" class="btm-go" onclick="javascript:var page = document.getElementById(\'pageInput'+b.name+"').value; if(isNaN(Number(page))|| Number(page)==0) { var turnTo = 1;} else if(page>"+this.pageCount+"){ var turnTo = "+this.pageCount+";} else{var turnTo = page;}  window."+b.name+'.toPage(turnTo);" >',c+="</font>"),d<1?c+='<span class="pre-none page-pic-no"></span>':c+='<span title="\u4e0a\u4e00\u9875" class="pre page-pic-no" onclick="'+b.name+".toPage("+d+');"></span>',this.page==1;if(this.page-2<=0){var f=1;if(this.pageCount>this.page+4)var g=this.page+4;else var g=this.pageCount}else if(this.page+2>=this.pageCount){var f=this.pageCount-4;if(this.pageCount>this.page+4)var g=this.page+4;else var g=this.pageCount}else{var f=this.page-2;if(this.pageCount>this.page+2)var g=this.page+2;else var g=this.pageCount}for(var h=f;h<=g;h++)h>0&&(h==this.page?c+='<span class="current a-padding">'+h+"</span>":c+='<a class="a-padding" href="javascript:'+b.name+".toPage("+h+');">'+h+"</a>");this.page+5<this.pageCount&&(c+='<a class="a-padding" title="" href="javascript:'+b.name+".toPage("+(this.page+3)+');">...</a>'),this.page==this.pageCount,e>this.pageCount?c+='<span class="next-none page-pic-no"></span>':c+='<span title="\u4e0b\u4e00\u9875" class="next page-pic-no" onclick="'+b.name+".toPage("+e+');"></span>',c+='<div style="clear:both"></div></div></div> '}break;case 3:c+='<div class="page-top"><div class="sabrosus"><span class="count">'+this.page+" / "+this.pageCount+"</span>",d<1?c+=' <span class="pre-none page-pic-no"></span>':c+='<a class="border-left-dedede" href="javascript:'+b.name+".toPage("+d+');" title="\u4e0a\u4e00\u9875"><span class="pre page-pic-no"></span></a>',e>this.pageCount?c+='<span class="next-none page-pic-no"></span>':c+='<a href="javascript:'+b.name+".toPage("+e+');" title="\u4e0b\u4e00\u9875"><span class="next page-pic-no"></span></a>',c+='<div style="clear:both"></div></div></div>'}return c},formatInputPage:function(a){var b=navigator.appName=="Microsoft Internet Explorer"?!0:!1;if(!b)var c=a.which;else var c=event.keyCode;return c==8||c==46||c>=48&&c<=57?!0:!1},toPage:function(a,b){var c=1,d=this;typeof a=="object"?c=a.options[a.selectedIndex].value:c=a,d.jump(c,b,"")},printHtml:function(a,c){return this.checkPages(),b.html(a,this._createHtml(c)),this},setPageCount:function(a){return this.pageCount=a,this},getPageCount:function(){return this.pageCount},setRender:function(a){return this.jump=a,this},setPageNum:function(a){return this.pageNum=a,this},setPage:function(a){return this.page=a,this}}),e}),KISSY.add("page/mods/check",function(a){return checkUtil={checkSpecTitle:function(a){var b=[],c=!1,d=null,e=/(淘宝)|(限时折扣)|(限时打折)|(良品)|(淘金币)|(天天特价)|(满就送)/i;if(e.test(a)){var f=e.exec(a);f!=null&&(c=!0,d="\u542b\u6709\u8fdd\u7981\u5b57"+f[0]+"\uff01")}return b.push(c),b.push(d),b},checkPromoName:function(a){var b=[],c=!1,d=null,e=/^[\u4E00-\u9FA5\uf900-\ufa2d\A-Za-z0-9]{2,5}$/;if(!e.test(a))if(a.length<2||a.length>5)c=!0,d="\u957f\u5ea62~5\u4e2a\u5b57\u7b26\uff01";else{var f=/[^\u4E00-\u9FA5\uf900-\ufa2d\A-Za-z0-9]+/,g=a.match(f);g!=null&&(c=!0,d="\u542b\u6709\u975e\u6cd5\u5b57\u7b26"+g[0]+"\uff01")}return b.push(c),b.push(d),b},checkPromoDesc:function(a){var b=[],c=!1,d=null,e=/^[\u4E00-\u9FA5\uf900-\ufa2d\w\s\，！。《》（）、—]{0,30}$/;if(!e.test(a))if(a.length>30)c=!0,d="\u957f\u5ea630\u4e2a\u5b57\u4ee5\u5185\uff01";else{var f=/[^\u4E00-\u9FA5\uf900-\ufa2d\w\s\，！。《》（）、—]+/,g=a.match(f);g!=null&&(c=!0,d="\u542b\u6709\u975e\u6cd5\u5b57\u7b26"+g[0]+"\uff01")}return b.push(c),b.push(d),b},checkUrl:function(a){var b=[],c=!1,d=null,e=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/;return e.test(a)||(c=!0,d="\u975e\u6cd5URl\u5730\u5740\uff01"),b.push(c),b.push(d),b},checkDiscount:function(a){var b=[],c=!1,d=null;if(isNaN(Number(a))||a<=0||a>=10)c=!0,d="\u6298\u6263\u8303\u56f4\u5728 0.00~9.99\u4e4b\u95f4\u54e6\uff01";else{var e=/(^[0-9]([.][0-9]{1,2})?$)|(^1[0-9]([.][0-9]{1,2})?$)|(^2[0-3]([.][0-9]{1,2})?$)|(^10([.]0{1,2})?$)/;e.test(a)||(c=!0,d="\u6298\u6263\u8303\u56f4\u5728 0.00~9.99\u4e4b\u95f4\u54e6\uff01")}return b.push(c),b.push(d),b},strProcess:function(a){return a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/[\t\n&]/g,"%26").replace(/%/g,"%25")},FormatNumber:function(a,b){var a,b,c,d;a=""+a+"",strLen=a.length,dotPos=a.indexOf(".",0);if(dotPos==-1){c=a+".";for(i=0;i<b;i++)c+="0";return c}if(strLen-dotPos-1>=b){nAfter=dotPos+b+1,d=1;for(j=0;j<b;j++)d*=10;return c=Math.floor(parseFloat(a)*d)/d,c}c=a;for(i=0;i<b-strLen+dotPos+1;i++)c+="0";return c},isNull:function(a){var b=[],c=!1,d=null;if(a==null||a=="")c=!0,d="\u8bf7\u586b\u5199\uff0c\u6b64\u9879\u4e0d\u80fd\u4e3a\u7a7a\uff01";return b.push(c),b.push(d),b}}}),KISSY.add("utils/beautifyForm/index",function(a){function g(b,c){var d=this;defaultCfg={init:!0};if(!(d instanceof g))return new g(b,c);var e=a.merge(defaultCfg,c);d._init(b,e)}var b=a.DOM,c=a.Event,d=document,e=b.get("body"),f=!1;return a.UA.safari!="undefined"&&a.UA.safari<3&&(f=!0),a.UA.ie==6&&b.replaceClass("#J_BodyHtml","has-js","no-js"),a.augment(g,{_init:function(a,b){var c=this;c.renderAll(a)},renderAll:function(a){var c=this;a=typeof a=="undefined"?"#J_BodyHtml":a;var d=b.filter(b.query(a+" input"),function(a){if(a.type=="checkbox"||a.type=="radio")return!0});for(var e=d.length-1;e>=0;e--)c.renderInput(d[e])},renderInput:function(a){var c=this,d=b.get(a),e=b.parent(d);e.tagName.toUpperCase()=="LABEL"&&e.className.indexOf("beautify_")>-1?e.className=="beautify_check"?c.renderCheckbox(d):e.className=="beautify_radio"&&c.renderRadio(d):e.tagName.toUpperCase()=="SPAN"&&b.hasClass(d,"beautify_input")&&c.renderCheckPro(d)},renderAllCheckPro:function(a){var c=this,d=b.filter(b.query(a+" input"),function(a){if((a.type=="checkbox"||a.type=="radio")&&b.hasClass(a,"beautify_input"))return!0});if(d.length<1)return;for(var e=d.length-1;e>=0;e--)c.renderCheckPro(d[e])},renderAllCheckbox:function(c){var d=this,e=b.filter(b.query(c+" input"),function(a){if(a.type=="checkbox")return!0});if(e.length<1){a.log("\u6b64id\u4e0b\u6ca1\u6709input(renderAllCheckbox)");return}for(var f=e.length-1;f>=0;f--)d.renderCheckbox(e[f])},renderAllRadio:function(c){var d=this,e=b.filter(b.query(c+" input"),function(a){if(a.type=="radio")return!0});if(e.length<1){a.log("\u6b64id\u4e0b\u6ca1\u6709input(renderAllRadio)");return}for(var f=e.length-1;f>=0;f--)d.renderRadio(e[f])},renderCheckPro:function(d){var e=this,g=b.get(d),h=b.prop(g,"type")=="checkbox",i=b.parent(g,"label")||b.parent(g,"span");if(!b.hasClass(g,"beautify_input")){a.log("input\u5fc5\u987b\u6709class=\u201dbeautify_input\u201c(renderCheckPro)");return}h?f&&g.checked==1||g.checked?(b.removeClass(i,"radio-checkoff-span"),b.addClass(i,"radio-checkon-span"),b.addClass(b.parent(i),"radio-checkstyle")):(b.removeClass(i,"radio-checkon-span"),b.addClass(i,"radio-checkoff-span"),b.removeClass(b.parent(i),"radio-checkstyle")):f&&g.checked==1||g.checked?(b.removeClass(i,"beautify_radio_off"),b.addClass(i,"beautify_radio_on"),b.addClass(b.parent(i),"radio-checkstyle")):(b.removeClass(i,"beautify_radio_on"),b.addClass(i,"beautify_radio_off"),b.removeClass(b.parent(i),"radio-checkstyle")),c.on(i,"click",function(a){a.stopPropagation();if(a.target.tagName.toUpperCase()=="LABEL")return;e.toggleCheckPro(g)})},renderCheckbox:function(a){var d=this,e=b.get(a),g=b.parent(e,"label")||b.parent(e,"span");if(!b.hasClass(g,"beautify_check"))return;b.append(b.create("<i>&nbsp;</i>"),g),e.disabled==1?f&&e.checked==1||e.checked?g.className="beautify_check c_on_disable":g.className="beautify_check beautify_check_disable":(f&&e.checked==1||e.checked?g.className="beautify_check c_on":g.className="beautify_check c_off",c.on(g,"click",function(a){a.stopPropagation();if(a.target.tagName.toUpperCase()=="LABEL")return;d.toggleCheckbox(e)}))},renderRadio:function(a){var d=this,e=b.get(a),g=b.parent(e,"label")||b.parent(e,"span");if(!b.hasClass(g,"beautify_radio"))return;b.append(b.create("<i>&nbsp;</i>"),g),e.disabled==1?f&&e.checked==1||e.checked?g.className="beautify_radio r_on_disable":g.className="beautify_radio beautify_radio_disable":(f&&e.checked==1||e.checked?g.className="beautify_radio r_on":g.className="beautify_radio r_off",c.on(g,"click",function(a){a.stopPropagation();if(a.target.tagName.toUpperCase()=="LABEL")return;d.toggleRadio(e)}))},setCheckboxOn:function(a){var c=b.get(a),d=b.parent(c,"label");d.className="beautify_check c_on",c.checked=!0},setCheckboxOff:function(a){var c=b.get(a),d=b.parent(c,"label");d.className="beautify_check c_off",c.checked=!1},setCheckboxDisabled:function(a){var c=b.get(a),d=b.parent(c,"label");f&&c.checked==1||c.checked?d.className="beautify_check c_on_disable":d.className="beautify_check beautify_check_disable",c.disabled=!0},setCheckboxNoDisabled:function(a){var c=b.get(a),d=b.parent(c,"label");f&&c.checked==1||c.checked?d.className="beautify_check c_on_disable":d.className="beautify_check beautify_check_disable",c.disabled=!1},toggleCheckbox:function(a){var c=b.get(a),d=b.parent(c,"label");d.className=="beautify_check c_off"?(d.className=="beautify_check c_on_disable"?d.className="beautify_check c_on_disable":d.className="beautify_check c_on",f&&c.click()):d.className=="beautify_check c_on_disable"?(d.className="beautify_check c_on_disable",f&&c.click()):d.className=="beautify_check beautify_check_disable"?(d.className="beautify_check beautify_check_disable",f&&c.click()):(d.className="beautify_check c_off",f&&c.click())},toggleRadio:function(a){var c=b.get(a),d=b.attr(c,"name"),e=b.parent(c,"label");if(e.className=="beautify_radio r_off"||c.checked){var g=b.filter(b.query("input"),function(a){if(a.type=="radio")return!0});for(var h=0;h<g.length;h++){var i=b.parent(g[h]);if(i.className.indexOf("beautify_radio")==-1)continue;if(b.attr(g[h],"name")!==d)continue;i.className="beautify_radio r_off"}e.className="beautify_radio r_on",f&&c.click()}else e.className=="beautify_radio beautify_radio_disable"?(e.className="beautify_radio beautify_radio_disable",f&&c.click()):(e.className="beautify_radio r_off",f&&c.click())},setRadioOn:function(a){var c=b.get(a),d=b.attr(c,"name"),e=b.parent(c,"label");if(e.className=="beautify_radio r_off"||c.checked){var f=b.filter(b.query("input"),function(a){if(a.type=="radio")return!0});for(var g=0;g<f.length;g++){var h=b.parent(f[g]);if(h.className.indexOf("beautify_radio")==-1)continue;if(b.attr(f[g],"name")!==d)continue;h.className="beautify_radio r_off"}e.className="beautify_radio r_on",c.checked=!0}},toggleCheckPro:function(a){var c=b.get(a),d=b.prop(c,"type")=="checkbox",e=b.attr(c,"name"),g=b.parent(a,"span");if(d)b.hasClass(g,"radio-checkon-span")?(b.removeClass(b.parent(g),"radio-checkstyle"),b.removeClass(g,"radio-checkon-span"),b.hasClass(g,"radio-checkoff-span")||b.addClass(g,"radio-checkoff-span")):(b.addClass(b.parent(g),"radio-checkstyle"),b.toggleClass(g,"radio-checkon-span","radio-checkoff-span"));else if(b.hasClass(g,"beautify_radio_off")){var h=b.filter(b.query(".beautify_input"),function(a){if(a.type=="radio")return!0});for(var c=0;c<h.length;c++){var i=h[c],j=b.parent(h[c]);if(i.className.indexOf("beautify_input")==-1)continue;if(b.attr(i,"name")!==e)continue;j.className="beautify_radio_off",b.removeClass(b.parent(j),"radio-checkstyle")}b.addClass(b.parent(g),"radio-checkstyle"),g.className="beautify_radio_on",f&&c.click()}else b.addClass(b.parent(g),"radio-checkstyle"),g.className="beautify_radio_on",f&&c.click()},setRadioPro:function(a){var c=b.get(a),d=b.attr(c,"name"),e=b.parent(a,"span"),f=b.filter(b.query(".beautify_input"),function(a){if(a.type=="radio")return!0});for(var c=0;c<f.length;c++){var g=f[c],h=b.parent(f[c]);if(g.className.indexOf("beautify_input")==-1)continue;if(b.attr(g,"name")!==d)continue;h.className="beautify_radio_off",b.removeClass(b.parent(h),"radio-checkstyle")}b.addClass(b.parent(e),"radio-checkstyle"),e.className="beautify_radio_on",b.get(a).checked=!0},setRadioProOff:function(a){var c=b.get(a),d=b.attr(c,"name"),e=b.parent(a,"span"),f=b.filter(b.query(".beautify_input"),function(a){if(a.type=="radio")return!0});for(var c=0;c<f.length;c++){var g=f[c],h=b.parent(f[c]);if(g.className.indexOf("beautify_input")==-1)continue;if(b.attr(g,"name")!==d)continue;h.className="beautify_radio_on"}e.className="beautify_radio_off",b.get(a).checked=!1},setCheckboxProOn:function(a){var c=b.get(a),d=b.attr(c,"name"),e=b.parent(a,"span");b.addClass(b.parent(e),"radio-checkstyle"),b.toggleClass(e,"radio-checkon-span","radio-checkoff-span"),b.get(a).checked=!0},setCheckboxProOff:function(a){var c=b.get(a),d=b.attr(c,"name"),e=b.parent(a,"span");b.removeClass(b.parent(e),"radio-checkstyle"),b.removeClass(e,"radio-checkon-span"),b.hasClass(e,"radio-checkoff-span")||b.addClass(e,"radio-checkoff-span"),b.get(a).checked=!1}}),g}),KISSY.add("page/list-init",function(a,b,c,d,e,f){var a=KISSY,g=a.DOM,h=a.Event;return promotionControl={msg:null,msg1:null,isLoad:!1,paginator:null,x:new f,init:function(){var b=a.later(promotionControl.getPromoItemWait("\u5df2\u6682\u505c"),5e3,!0,null);promotionControl.getPromoItemNum(),h.on("#J_updateDiscount","click",function(){g.val("#J_isDiscount","1");var a=IsExpired();if(a>-5e3){var b=function(a){promotionControl.getPromoItemNum()},c=function(a){KISSY.Event.fire(".J_TopExpired","click")},d="";(new H.widget.asyncRequest).setURI(isExpiredUrl).setMethod("GET").setHandle(b).setErrorHandle(c).setData(d).send()}else promotionControl.getPromoItemNum()}),h.on("#J_past","click",function(){promotionControl.setExpiredPromo()}),h.on(".J_promoTypeBtn","mouseenter mouseleave",function(b){var c=g.attr(b.currentTarget,"pid"),d=a.one("#J_promoTypeItems"+c),e=d.css("display");b.type=="mouseenter"?d.slideDown(.3):d.slideUp(.1)}),h.on(".J_downIcon","mouseenter mouseleave",function(a){var b=g.attr(a.currentTarget,"pid");a.type=="mouseenter"?g.show("#J_downMore"+b):g.hide("#J_downMore"+b)}),h.delegate(document,"mouseenter mouseleave",".J_listItem",function(a){a.type=="mouseenter"?g.addClass(a.currentTarget,"current"):g.removeClass(a.currentTarget,"current")}),new d.DatePicker({trigger:".J_tiems",showTime:!0,autoRender:!0,autoSetValue:!0,delegateTigger:!0}),h.delegate(document,"click",".J_BackTo",function(){g.show("#promoList"),g.show("#J_PromoDetail"),g.hide("#itemList"),g.hide("#J_BackToPromoList")}),h.delegate(document,"mouseenter mouseleave",".J_OnClickShopDesc",function(a){a.type=="mouseenter"?g.addClass(a.currentTarget,"current"):g.removeClass(a.currentTarget,"current")}),h.on(g.query(".J_GetTemplet"),"click",function(){var a=function(a){promotionControl.msg.hide();var b='<div class="pop-getCode"><textarea id="J_Templet_Content" onclick="this.select()">'+a.payload+"</textarea></br>"+'\u9f20\u6807\u4e8e\u6846\u5185CTRL+C\uff1a\u590d\u5236\u3001CTRL+V\uff1a\u7c98\u8d34 <a class="J_Copy">\u70b9\u6b64\u590d\u5236</a>'+"</div>",c=new e.Dialog({title:"\u83b7\u53d6\u6d77\u62a5\u4ee3\u7801",width:440,mask:!0,footerStyle:{display:"none"},bodyContent:b});c.show(),promotionControl.clipboard(".J_Copy","#J_Templet_Content")},b=function(a){promotionControl.msg.hide(),new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},c=g.attr(this,"data"),d="pid="+c+"&form_key="+FORM_KEY;promotionControl.msg=new H.widget.msgBox({title:"",dialogType:"loading",content:"\u83b7\u53d6\u4ee3\u7801\u4e2d\uff0c\u8bf7\u7a0d\u5019"}),(new H.widget.asyncRequest).setURI(getTempletUrl).setMethod("GET").setHandle(a).setErrorHandle(b).setData(d).send()}),h.on(g.query(".J_Delete"),"click",function(){if(!showPermissions("editor_promotion","\u4fc3\u9500\u6d3b\u52a8"))return;var a=g.attr(this,"data"),b=g.val("#J_TypeId_"+a),c=IsExpired();if(c>-5e3&&b==10){var d=function(b){promotionControl.deleteHandle(a)},e=function(a){KISSY.Event.fire(".J_TopExpired","click")},f="";(new H.widget.asyncRequest).setURI(isExpiredUrl).setMethod("GET").setHandle(d).setErrorHandle(e).setData(f).send()}else promotionControl.deleteHandle(a)}),h.on(g.query(".J_Pause"),"click",function(){if(!showPermissions("editor_promotion","\u7f16\u8f91\u4fc3\u9500\u6d3b\u52a8"))return;var a=g.attr(this,"data"),b=IsExpired();if(b>-5e3){var c=function(b){promotionControl.pausePromo(a)},d=function(a){KISSY.Event.fire(".J_TopExpired","click")},e="";(new H.widget.asyncRequest).setURI(isExpiredUrl).setMethod("GET").setHandle(c).setErrorHandle(d).setData(e).send()}else promotionControl.pausePromo(a)}),h.on(g.query(".J_Restart"),"click",function(){if(!showPermissions("editor_promotion","\u91cd\u542f\u4fc3\u9500\u6d3b\u52a8"))return;var a=g.attr(this,"data"),b=IsExpired();if(b>-5e3){var c=function(b){promotionControl.restartPromo(a)},d=function(a){KISSY.Event.fire(".J_TopExpired","click")},e="";(new H.widget.asyncRequest).setURI(isExpiredUrl).setMethod("GET").setHandle(c).setErrorHandle(d).setData(e).send()}else promotionControl.restartPromo(a)}),h.delegate(document,"click",".J_OnClickShopDesc",function(a){if(!showPermissions("editor_promotion","\u7f16\u8f91\u4fc3\u9500\u6d3b\u52a8"))return;g.hide(a.currentTarget);var b=g.attr(a.currentTarget,"data"),c=KISSY.trim(g.val("#J_SouceShopDesc_"+b));if(!KISSY.one("#J_EditorShopDesc_"+b)){var d='<input type="text"  class="edit-desc-input" data ="'+b+'" id="J_InputShopDesc_'+b+'">';g.html("#J_ShowEditorDesc_"+b,d)}g.show("#J_ShowEditorDesc_"+b),h.on("#J_InputShopDesc_"+b,"blur",function(){KISSY.later(function(){g.hide("#J_ShowEditorDesc_"+b),g.show("#J_Promo_"+b+" .J_OnClickShopDesc")},200,!1,null)}),g.get("#J_InputShopDesc_"+b).focus(),g.val("#J_InputShopDesc_"+b,c),h.on("#J_InputShopDesc_"+b,"focusout",function(a){var b=g.attr(a.currentTarget,"data"),c=KISSY.trim(g.val("#J_SouceShopDesc_"+b)),d=KISSY.trim(g.val("#J_InputShopDesc_"+b));if(c==d){g.hide("#J_ShowEditorDesc_"+b),g.show("#J_Promo_"+b+" .J_OnClickShopDesc");return}var e=function(a){g.hide("#J_ShowEditorDesc_"+b),d?g.html("#J_Promo_"+b+" .J_OnClickShopDesc","\u6ce8\uff1a<em>"+d+"</em>"):g.html("#J_Promo_"+b+" .J_OnClickShopDesc",'<span class="edit-tip">\u586b\u5907\u6ce8</span>'),g.show("#J_Promo_"+b+" .J_OnClickShopDesc"),g.val("#J_SouceShopDesc_"+b,d)},f=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error",autoClose:!0,timeOut:3e3})},h="pid="+b+"&shop_desc="+encodeURI(d)+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(saveShopDescUrl).setMethod("GET").setHandle(e).setErrorHandle(f).setData(h).send()})}),h.delegate(document,"click mouseenter mouseleave",".J_EditorPromoName",function(a){if(a.type=="mouseenter")g.addClass(a.currentTarget,"hover");else if(a.type=="mouseleave")g.removeClass(a.currentTarget,"hover");else if(a.type=="click"){if(!showPermissions("editor_promotion","\u7f16\u8f91\u4fc3\u9500\u6d3b\u52a8"))return;var b=g.attr(a.currentTarget,"data"),c=IsExpired();if(c>-5e3){var d=function(a){promotionControl.editorPromoName(b)},e=function(a){KISSY.Event.fire(".J_TopExpired","click")},f="";(new H.widget.asyncRequest).setURI(isExpiredUrl).setMethod("GET").setHandle(d).setErrorHandle(e).setData(f).send()}else promotionControl.editorPromoName(b)}}),h.delegate(document,"click mouseenter mouseleave",".J_EditorPromoTime",function(a){if(a.type=="mouseenter")g.addClass(a.currentTarget,"edit-activity-hover");else if(a.type=="mouseleave")g.removeClass(a.currentTarget,"edit-activity-hover");else if(a.type=="click"){if(!showPermissions("editor_promotion","\u7f16\u8f91\u4fc3\u9500\u6d3b\u52a8"))return;var b=g.attr(a.currentTarget,"data"),c=IsExpired();if(c>-5e3){var d=function(a){promotionControl.editorPromoTime(b)},e=function(a){KISSY.Event.fire(".J_TopExpired","click")},f="";(new H.widget.asyncRequest).setURI(isExpiredUrl).setMethod("GET").setHandle(d).setErrorHandle(e).setData(f).send()}else promotionControl.editorPromoTime(b)}})},getPromoItemWait:function(b){var c=g.query(".J_Refresh_Flag");if(c.length>0){var d=function(a){var c=a.payload,d=c.length;for(var e=0;e<d;e++)g.html("#J_promoStatus"+c[e].id,b),g.removeClass("#J_Refresh_"+c[e].id,"J_Refresh_Flag")},e=[];a.each(c,function(a){var b=g.val(a);e.push(b)});var f=e.join(","),h="promo_ids="+f;(new H.widget.asyncRequest).setURI(getPromoStatusUrl).setMethod("POST").setHandle(d).setData(h).send()}},getPromoItemNum:function(a){var b=function(a){g.hide("#J_loadingDiscount"),g.show("#J_storeDiscount"),g.text("#J_storeDiscount",a.payload+" \u6298")},c=function(a){g.hide("#J_loadingDiscount"),g.show("#J_storeDiscount"),g.text("#J_storeDiscount","\u83b7\u53d6\u4e0d\u5230")};g.show("#J_loadingDiscount"),g.hide("#J_storeDiscount");var d=g.val("#J_isDiscount"),e="fg="+d;(new H.widget.asyncRequest).setURI(getLowestDisUrl).setMethod("GET").setHandle(b).setErrorHandle(c).setData(e).send()},clipboard:function(a,b){h.on(a,"click",function(a){var c=g.val(b);if(window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",c),new H.widget.msgBox({type:"success",content:"\u5df2\u6210\u529f\u590d\u5236",dialogType:"msg",autoClose:!0,timeOut:3e3});else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(d){return new H.widget.msgBox({type:"error",content:"\u60a8\u7684firefox\u5b89\u5168\u9650\u5236\u9650\u5236\u60a8\u8fdb\u884c\u526a\u8d34\u677f\u64cd\u4f5c\uff0c\u8bf7\u6253\u5f00'about:config'\u5c06signed.applets.codebase_principal_support'\u8bbe\u7f6e\u4e3atrue'\u4e4b\u540e\u91cd\u8bd5\uff0c\u76f8\u5bf9\u8def\u5f84\u4e3afirefox\u6839\u76ee\u5f55/greprefs/all.js",dialogType:"msg",autoClose:!0,timeOut:5e3}),!1}var e=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!e)return;var f=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!f)return;f.addDataFlavor("text/unicode");var h=new Object,i=new Object,h=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString),j=c;h.data=j,f.setTransferData("text/unicode",h,j.length*2);var k=Components.interfaces.nsIClipboard;if(!e)return!1;e.setData(f,null,k.kGlobalClipboard),new H.widget.msgBox({type:"success",content:"\u5df2\u6210\u529f\u590d\u5236",dialogType:"msg",autoClose:!0,timeOut:3e3})}else KISSY.UA.core=="webkit"&&new H.widget.msgBox({type:"error",content:"\u8be5\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u7528 Ctrl+c \u590d\u5236",dialogType:"msg",autoClose:!0,timeOut:3e3});return!1})},pausePromo:function(b){var c=function(c){new H.widget.msgBox({title:"\u6682\u505c\u6d3b\u52a8",content:"\u6682\u505c\u6d3b\u52a8\u5c06\u4f1a\u53d6\u6d88\u60a8\u8bbe\u7f6e\u7684\u4fc3\u9500\u6d3b\u52a8",type:"confirm",buttons:[{value:"\u6682\u505c"},{value:"\u53d6\u6d88"}],success:function(c){if(c=="\u6682\u505c"){var d="pid="+b+"&form_key="+FORM_KEY,e=function(c){g.text("#J_promoStatus"+b,"\u6b63\u5728\u6682\u505c"),g.hide("#J_listAddItem"+b),g.addClass("#J_Refresh_"+b,"J_Refresh_Flag"),a.later(promotionControl.getPromoItemWait("\u5df2\u6682\u505c"),5e3,!0,null)},f=function(a){if(a.desc=="need-oauth"){KISSY.Event.fire(".J_TopExpired","click");return}new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})};(new H.widget.asyncRequest).setURI(pauseUrl).setMethod("GET").setHandle(e).setErrorHandle(f).setData(d).send()}}})},d=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},e="pid="+b+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(getPromoTimeUrl).setMethod("GET").setHandle(c).setErrorHandle(d).setData(e).send()},restartPromo:function(b){var c=function(c){promotionControl.msg.hide();var d=g.val("#J_TypeId_"+b);if(d==10)var f="\u5f00\u59cb\u65f6\u95f4 \uff1a\u7acb\u5373\u5f00\u59cb",h="hidden";else var f="\u5f00\u59cb\u65f6\u95f4\uff1a",h="text";var i='<div class="pop-restart"><div class="restart-tiem">\u5f00\u59cb\u65f6\u95f4\uff1a <input type="'+h+'" value="'+c.payload.stime+'" id="J_stime" class="input-text-1 input-text J_tiems"/></div>'+'<div class="restart-tiem">\u7ed3\u675f\u65f6\u95f4\uff1a <input type="text" value="'+c.payload.etime+'" id="J_etime" class="input-text-1 input-text J_tiems"/></div>'+"</div>";(new e.Dialog({title:"\u91cd\u542f\u6d3b\u52a8",width:480,height:230,mask:!0,buttons:[{text:"\u786e\u5b9a\u4fee\u6539",elCls:"bui-button bui-button-primary",handler:function(){var c=function(a){new H.widget.msgBox({type:"sucess",dialogType:"msg",content:"\u6d3b\u52a8\u91cd\u542f\u6210\u529f",autoClose:!0,timeOut:3e3}),window.location.href=currentPageUrl},d=function(a){if(a.desc=="need-oauth"){KISSY.Event.fire(".J_TopExpired","click");return}new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},e=g.val(g.get("#J_stime")),f=g.val(g.get("#J_etime")),h=H.util.stringToDate(a.one("#J_stime").val()),i=H.util.stringToDate(a.one("#J_etime").val());if(i!=""&&h.getTime()>=i.getTime()){new H.widget.msgBox({type:"error",content:"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",dialogType:"msg",autoClose:!0,timeOut:3e3});return}if(h!=""&&i.getTime()<=h.getTime()){new H.widget.msgBox({type:"error",content:"\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65f6\u95f4\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",dialogType:"msg",autoClose:!0,timeOut:3e3});return}var j="pid="+b+"&etime="+f+"&stime="+e+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(restartUrl).setMethod("GET").setHandle(c).setErrorHandle(d).setData(j).send(),this.destroy()}},{text:"\u53d6\u6d88\u4fee\u6539",elCls:"bui-button J_buttonCancel",handler:function(){this.destroy()}}],bodyContent:i})).show()},d=function(a){promotionControl.msg.hide(),new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})};promotionControl.msg=new H.widget.msgBox({title:"",dialogType:"loading",content:"\u83b7\u53d6\u6d3b\u52a8\u65f6\u95f4\uff0c\u8bf7\u7a0d\u5019"});var f="pid="+b+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(getPromoTimeUrl).setMethod("GET").setHandle(c).setErrorHandle(d).setData(f).send()},editorPromoName:function(a){if(g.hasClass("#J_Promo_"+a,"ing")){new H.widget.msgBox({type:"error",dialogType:"msg",content:"\u6d3b\u52a8\u6b63\u5728\u7f16\u8f91\u4e2d\uff01",autoClose:!0,timeOut:3e3});return}g.addClass("#J_Promo_"+a,"ing"),g.hide("#J_PromoNameBox_"+a);var b=KISSY.trim(g.val("#J_SoucePromoName_"+a)),d='<input type="text" class="edit-name-input" data ="'+a+'" id="J_InputPromoName_'+a+'">';g.html("#J_ShowEditorPromoName_"+a,d),g.show("#J_ShowEditorPromoName_"+a),h.on("#J_InputPromoName_"+a,"blur",function(){g.removeClass("#J_Promo_"+a,"ing"),KISSY.later(function(){g.hide("#J_ShowEditorPromoName_"+a),g.show("#J_PromoNameBox_"+a)},200,!1,null)}),g.get("#J_InputPromoName_"+a).focus(),g.val("#J_InputPromoName_"+a,b),h.on("#J_InputPromoName_"+a,"focusout",function(a){var b=g.attr(a.currentTarget,"data"),d=KISSY.trim(g.val("#J_SoucePromoName_"+b)),e=KISSY.trim(g.val("#J_InputPromoName_"+b));if(d==e){g.hide("#J_ShowEditorPromoName_"+b),g.show("#J_PromoNameBox_"+b),g.removeClass("#J_Promo_"+b,"ing");return}var f=H.util.isNull(e),h=f[0],i=f[1];if(h){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:"\u51fa\u9519\u4e86\uff1a"+i,type:"error"}),g.removeClass("#J_Promo_"+b,"ing");return}f=c.checkSpecTitle(e),h=f[0],i=f[1];if(h){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:"\u51fa\u9519\u4e86\uff1a"+i,type:"error"}),g.removeClass("#J_Promo_"+b,"ing");return}var j=g.val("#J_TypeId_"+b);if(j=="2"||j=="9"||j=="20"||j=="22"){f=c.checkPromoName(e),h=f[0],i=f[1];if(h){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:"\u51fa\u9519\u4e86\uff1a"+i,type:"error"}),g.removeClass("#J_Promo_"+b,"ing");return}}var k=function(a){g.text("#J_editpromoName"+b,e),g.val("#J_SoucePromoName_"+b,e)},h=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"}),g.removeClass("#J_Promo_"+b,"ing")},l="pid="+b+"&promo_name="+encodeURI(e)+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(savePromoNameUrl).setMethod("GET").setHandle(k).setErrorHandle(h).setData(l).send()})},editorPromoTime:function(b){var c=KISSY.trim(g.val("#J_SoucePromoStartTime_"+b)),d=KISSY.trim(g.val("#J_SoucePromoEndTime_"+b)),f=g.val("#J_isPauseing_"+b),i=g.val("#J_isWillEnd_"+b),j='<div class="pop-restart '+f+" "+i+'" id="J_restarts'+b+'">'+'<div class="restart-tiem">\u5f00\u59cb\u65f6\u95f4\uff1a <input type="text" value="'+c+'" id="J_startDate_'+b+'" class="input-text-1 input-text J_tiems"/></div>'+'<div class="restart-tiem">\u7ed3\u675f\u65f6\u95f4\uff1a <input type="text" value="'+d+'" id="J_endDate_'+b+'" class="input-text-1 input-text J_tiems"/>&nbsp;&nbsp;&nbsp;<a id="J_prolong'+b+'">\u7acb\u5373\u5ef6\u957f7\u5929</a></div>'+'<div class="restart-check"><label for="J_IsRestart'+b+'" class="beautify_check"><input type="checkbox" id="J_IsRestart'+b+'" value="1">\u542f\u52a8\u6d3b\u52a8\uff08\u8be5\u6d3b\u52a8\u5904\u4e8e\u6682\u505c\u72b6\u6001\uff09</label></div>'+"</div>";(new e.Dialog({title:"\u7f16\u8f91\u6d3b\u52a8\u65f6\u95f4",width:480,height:250,mask:!0,buttons:[{text:"\u4fdd\u5b58",elCls:"bui-button bui-button-primary",handler:function(){var e=function(a){g.text("#J_listTime"+b,j),g.text("#J_timeS"+b,k),g.text("#J_timeE"+b,l),g.val("#J_SoucePromoStartTime_"+b,NSpromoTime),g.val("#J_SoucePromoEndTime_"+b,NEpromoTime)},f=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})};NSpromoTime=KISSY.trim(g.val("#J_startDate_"+b)),NEpromoTime=KISSY.trim(g.val("#J_endDate_"+b));var h=H.util.stringToDate(a.one("#J_startDate_"+b).val()),i=H.util.stringToDate(a.one("#J_endDate_"+b).val()),j=Math.floor((i.getTime()-h.getTime())/864e5),k=(new Date(h)).format("MM\u6708dd\u65e5 hh:mm"),l=(new Date(i)).format("MM\u6708dd\u65e5 hh:mm");if(i!=""&&h.getTime()>=i.getTime()){new H.widget.msgBox({type:"error",content:"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",dialogType:"msg",autoClose:!0,timeOut:3e3});return}if(h!=""&&i.getTime()<=h.getTime()){new H.widget.msgBox({type:"error",content:"\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65f6\u95f4\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",dialogType:"msg",autoClose:!0,timeOut:3e3});return}if(c==NSpromoTime&&d==NEpromoTime){this.destroy();return}if(g.hasClass("#J_restarts"+b,"pauseing"))var m=g.prop("#J_IsRestart"+b,"checked")?1:0;else var m=0;var n="pid="+b+"&start_date="+NSpromoTime+"&end_date="+NEpromoTime+"&isReStart="+m+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(savePromoTimeUrl).setMethod("GET").setHandle(e).setErrorHandle(f).setData(n).send(),this.destroy()}},{text:"\u53d6\u6d88",elCls:"bui-button J_buttonCancel",handler:function(){this.destroy()}}],bodyContent:j})).show(),promotionControl.x.renderAllCheckbox("#J_restarts"+b),h.on("#J_prolong"+b,"click",function(a){var c=(new Date).format("yyyy-MM-dd hh:mm:ss"),d=(new Date).getTime()+6048e5,e=(new Date(d)).format("yyyy-MM-dd hh:mm:ss");g.val("#J_startDate_"+b,c),g.val("#J_endDate_"+b,e)})},deleteHandle:function(a){new H.widget.msgBox({title:"\u5220\u9664\u6d3b\u52a8",content:"\u7cfb\u7edf\u5c06\u4e3a\u60a8\u53d6\u6d88\u6b64\u6d3b\u52a8\u8bbe\u7f6e\u7684\u4fc3\u9500\u4fe1\u606f",type:"confirm",buttons:[{value:"\u786e\u5b9a\u5220\u9664"},{value:"\u53d6\u6d88"}],success:function(b){if(b=="\u786e\u5b9a\u5220\u9664"){var c=function(a){new H.widget.msgBox({type:"sucess",dialogType:"msg",content:"\u6d3b\u52a8\u5df2\u5220\u9664",autoClose:!0,timeOut:3e3}),window.location.reload()},d=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},e="pid="+a+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(deleteUrl).setMethod("GET").setHandle(c).setErrorHandle(d).setData(e).send()}}})},searchPromoItems:function(){promotionControl.isLoad||(promotionControl.isLoad=!0),g.hide("#promoList"),g.show("#itemList");var a=function(a){g.hide("#J_LeftLoading"),g.show("#J_MainLeftContent"),g.hide("#J_PromoDetail"),g.show("#J_BackToPromoList"),totalRecords=a.payload.totalRecords,totalRecords>0?(g.get("#J_LEmpty").style.display="none",g.removeClass(g.query(".J_PromotionItemBtnHolder"),"ks-hidden")):(g.get("#J_LEmpty").style.display="",g.addClass(g.query(".J_PromotionItemBtnHolder"),"ks-hidden")),g.html("#J_PromoItems",a.payload.body),pageCount=Math.ceil(totalRecords/a.payload.pageNum),promotionControl.paginator=(new b("promotionControl.paginator")).setRender(promotionControl.handlePagination).setPageCount(pageCount).printHtml("#J_PromotionItemPaging",2)},c=function(a){g.show("#promoList"),g.show("#J_PromoDetail"),g.hide("#itemList"),g.hide("#J_BackToPromoList"),new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})};if(g.val(g.get("#J_SearchTitle"))!="\u5173\u952e\u5b57\u3001\u94fe\u63a5\u3001\u5546\u54c1\u7f16\u7801")var d=encodeURIComponent(g.val(g.get("#J_SearchTitle")));else var d="";var e=g.val(g.get("#J_SearchStatus")),f="keytitle="+d+"&status="+e;g.show("#J_LeftLoading"),g.hide("#J_MainLeftContent"),(new H.widget.asyncRequest).setURI(getPromoItemsUrl).setMethod("GET").setHandle(a).setErrorHandle(c).setData(f).setDataType("json").send()},handlePagination:function(a){pageId=a;var b=function(a){totalRecords=a.payload.totalRecords,totalRecords>0?(g.get("#J_LEmpty").style.display="none",g.removeClass(g.get(".J_PromotionItemBtnHolder"),"ks-hidden")):(g.get("#J_LEmpty").style.display="",g.addClass(g.get(".J_PromotionItemBtnHolder"),"ks-hidden")),pageCount=Math.ceil(totalRecords/a.payload.pageNum),g.html("#J_PromoItems",a.payload.body),promotionControl.paginator.setPage(pageId).setPageCount(pageCount).printHtml("#J_PromotionItemPaging",2),g.hide("#J_LeftLoading"),g.show("#J_MainLeftContent")};if(g.val(g.get("#J_SearchTitle"))!="\u5173\u952e\u5b57\u3001\u94fe\u63a5\u3001\u5546\u54c1\u7f16\u7801")var c=encodeURIComponent(g.val(g.get("#J_SearchTitle")));else var c="";var d=g.val(g.get("#J_SearchStatus")),e="keytitle="+c+"&status="+d+"&page_id="+pageId;g.show("#J_LeftLoading"),g.hide("#J_MainLeftContent"),(new H.widget.asyncRequest).setURI(getPromoItemsUrl).setMethod("GET").setHandle(b).setData(e).send()},removePromotionItemHandle:function(a,b,c){if(!showPermissions("editor_promotion","\u7f16\u8f91\u4fc3\u9500\u6d3b\u52a8"))return;if(c=="promoItems")var d=g.val("#J_TypeIdItem_"+a);if(d==10){var e=IsExpired();if(e>-5e3){var f=function(d){promotionControl.deletePromotionItemHandle(a,b,c)},h=function(a){KISSY.Event.fire(".J_TopExpired","click")},i="";(new H.widget.asyncRequest).setURI(isExpiredUrl).setMethod("GET").setHandle(f).setErrorHandle(h).setData(i).send()}else promotionControl.deletePromotionItemHandle(a,b,c)}else promotionControl.deletePromotionItemHandle(a,b,c)},deletePromotionItemHandle:function(a,b,c){itemIds=[],c=="promoItems"&&(g.hide("#J_RemovePromo_"+a),g.show("#J_MinLoading_"+a)),a&&b&&(itemIds.push(a),pid=b);var d=function(a){promotionControl.paginator?promotionControl.paginator.toPage(promotionControl.paginator.page):promotionControl.searchPromoItems()},e="pid="+pid+"&item_ids="+itemIds+"&form_key="+FORM_KEY;(new H.widget.asyncRequest).setURI(removePromotionItemUrl).setMethod("POST").setHandle(d).setData(e).send()},setExpiredPromo:function(){var a=function(a){window.location.href=ExpiredUrl},b=function(a){alert(a.desc)},c="";(new H.widget.asyncRequest).setURI(setExpiredPromoUrl).setMethod("GET").setHandle(a).setErrorHandle(b).setData(c).send()}}},{requires:["utils/showPages/index","./mods/check","bui/calendar","bui/overlay","utils/beautifyForm/index"]}); 