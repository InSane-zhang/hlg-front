KISSY.add("page/sale-init",function(a,b){var a=KISSY,c=a.DOM,d=a.Event;return saleControl={paginator:null,page:null,chart:null,msg:null,popup:null,init:function(){var a=new b.Tip({trigger:"#J_promptHelp0",alignType:"top",offset:10,elCls:"ui-tip",title:'<div class="ui-tip-text">\u6210\u4ea4\u7528\u6237\u4ece\u4e0b\u5355\u5230\u53d1\u8d27\u7684\u5e73\u5747\u8de8\u5ea6</div>'});a.render();var e=new b.Tip({trigger:"#J_promptHelp1",alignType:"top",offset:10,elCls:"ui-tip",title:'<div class="ui-tip-text">\u6210\u4ea4\u7528\u6237\u4ece\u4e0b\u5355\u5230\u4ea4\u6613\u6210\u529f\u7684\u5e73\u5747\u8de8\u5ea6</div>'});e.render(),d.on(".J_ListBtn1","click",function(a){var b=c.attr(a.currentTarget,"data");c.val("#J_TypeId",b),c.removeClass(".J_ListBtn1","current"),c.addClass(a.currentTarget,"current"),saleControl.getSaleAjax()}),d.on(".J_ListBtn2","click",function(a){var b=c.attr(a.currentTarget,"data");c.removeClass(".J_ListBtn2","current"),c.addClass(a.currentTarget,"current"),c.val("#J_time",b),saleControl.getSaleAjax()}),saleControl.getSaleAjax()},getSaleAjax:function(){var b=function(b){c.html(c.get("#J_List"),b.payload.body,!0),saleControl.chart&&saleControl.chart.destroy(),jQuery(function(){jQuery("#J_Chart1").highcharts({chart:{type:"line",height:300,spacingLeft:0,spacingRight:0,spacingBottom:15,spacingTop:15},title:{text:"\u8ba2\u8d2d\u4eba\u6570\u8d70\u52bf",verticalAlign:"bottom",y:35,"float":!0},colors:["#8bd167","#4dc1e8","#fb6e52","#ffce55","#656d78","#ac92ed","#ec87c1","#4b89dc","#db4453","#d8ad88","#00d39f","#a2b1c7","#5937ae","#bc3783"],plotOptions:{series:{stickyTracking:!1,marker:{symbol:"circle"}}},xAxis:{categories:b.payload.xdata,labels:{step:b.payload.xkuadu}},yAxis:{title:{text:null},minPadding:0,maxPadding:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}"}},legend:{enabled:!0,borderWidth:0},credits:{enabled:!1},series:[]})});var d=b.payload.pointdata;saleControl.chart=jQuery("#J_Chart1").highcharts(),a.each(d,function(a,b){saleControl.chart.addSeries(a)})},d=function(a){c.html(c.get("#J_Chart1"),a.desc,!0)};c.html("#J_Chart1",'<div class="loading" style="display:block;"></div>');var e=c.val("#J_time"),f=c.val("#J_TypeId"),g="type_id="+f+"&show_cycle="+e;(new H.widget.asyncRequest).setURI(getSaleAjaxUrl).setMethod("POST").setHandle(b).setErrorHandle(d).setData(g).send()}}},{requires:["bui/tooltip"]}); 