KISSY.add("page/option-edit-init",function(a,b){var c=a.DOM,d=a.Event;return editControl={panel:null,msg:null,init:function(){},delDialog:function(a,b){new H.widget.msgBox({title:"\u5220\u9664",content:"",type:"confirm",buttons:[{value:"\u786e\u5b9a\u5220\u9664"},{value:"\u53d6\u6d88"}],success:function(a){a=="\u786e\u5b9a\u5220\u9664"&&editControl.del("+protoId+","+paramId+")}})},del:function(a,b){var c=function(a){new H.widget.msgBox({title:"\u63d0\u793a",content:a.payload.message,type:"error"})},d=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},e="param_id="+b+"&proto_id="+a;(new H.widget.asyncRequest).setURI(uri).setMethod("POST").setHandle(c).setErrorHandle(d).setData(e).send()},nameMod:function(a,b){var d=function(a){new H.widget.msgBox({title:"\u63d0\u793a",content:a.payload.message,type:"error"})},e=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},f=c.val("#value"),g="param_id="+b+"&value="+f+"&proto_id="+a;(new H.widget.asyncRequest).setURI(nameuri).setMethod("POST").setHandle(d).setErrorHandle(e).setData(g).send()},nameDialog:function(a,b,c){new H.widget.msgBox({title:"\u4fee\u6539",content:'<input type="text" id="value" name="value" value="'+c+'" style="height:20px;width:250px"><br /><br>',type:"confirm",buttons:[{value:"\u786e\u5b9a"},{value:"\u53d6\u6d88"}],success:function(a){a=="\u786e\u5b9a"&&editControl.nameMod("+protoId+","+paramId+")}})},optionValueDialog:function(a,b){editControl.panel=new H.widget.msgBox({title:"\u4fee\u6539",content:'<input type="text" id="value" name="value" value="'+b+'" style="height:20px;width:250px"><br /><br>',type:"confirm",buttons:[{value:"\u786e\u5b9a"},{value:"\u53d6\u6d88"}],success:function(a){a=="\u786e\u5b9a"&&(editControl.panel.hide(),editControl.valueMod("+optionId+"))}})},valueMod:function(a){var b=function(a){new H.widget.msgBox({title:"\u63d0\u793a",content:a.payload.message,type:"error"})},d=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},e=c.val("#value"),f="option_id="+a+"&value="+e;(new H.widget.asyncRequest).setURI(valueuri).setMethod("POST").setHandle(b).setErrorHandle(d).setData(f).send()},defaultValueMod:function(a,b){var d=function(a){new H.widget.msgBox({title:"\u63d0\u793a",content:a.payload.message,type:"error"})},e=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},f=c.val("#default_value"),g="param_id="+b+"&default_value="+f+"&proto_id="+a;(new H.widget.asyncRequest).setURI(defaulturi).setMethod("POST").setHandle(d).setErrorHandle(e).setData(g).send()},defauleValueDialog:function(a,b,c){editControl.panel=new H.widget.msgBox({title:"\u4fee\u6539",content:'<input type="text" id="default_value" name="default_value" value="'+c+'" style="height:20px;width:250px"><br /><br>',type:"confirm",buttons:[{value:"\u786e\u5b9a"},{value:"\u53d6\u6d88"}],success:function(a){a=="\u786e\u5b9a"&&(editControl.panel.hide(),editControl.defaultValueMod("+protoId+","+paramId+"))}})},addGroup:function(b){var d=1,e='<div class="w-470 margin-auto" id="groupTr-'+d+'">'+'<li class="clear" style=" padding-top:15px">'+'<div class="active-add-edit-title w-100 align-right">\u53c2\u6570\u9009\u9879\uff1a</div>'+'<div class="active-add-edit-edit relative">'+'<select name="value[]" onchange="change(this, '+d+')">'+'<option value="0">\u8bf7\u9009\u62e9</option>'+"</select>"+'<p class="note" id="J_promo_name" ></p>'+"</div>"+"</li>"+'<li class="clear" id="content-'+d+'" style="display:none">'+'<div class="active-add-edit-title w-100 align-right">\u9009\u62e9\u503c\uff1a</div>'+'<div class="active-add-edit-edit relative">'+'<input type="text" class="input-text w-360"  value="" name="content[]">'+'<p class="note" id="J_promo_name" ></p>'+"</div>"+"</li>"+'<li class="clear">'+'<div class="active-add-edit-title w-100 align-right">\u9ed8\u8ba4\u503c\uff1a</div>'+'<div class="active-add-edit-edit relative">'+'<input type="text" class="input-text w-360"  value="" name="default_value[]">'+'<p class="note" id="J_promo_name" ></p>'+"</div>"+"</li>"+'<li class="clear">'+'<div class="active-add-edit-title w-100 align-right">\u53c2\u6570\u540d\u79f0\uff1a</div>'+'<div class="active-add-edit-edit relative">'+'<input type="text" class="input-text w-360"  value="" name="proto_field_name[]">'+'<p class="note" id="J_promo_name" ></p>'+"</div>"+"</li>"+"</div>",f=new a.Node(e);c.insertBefore(f,c.get("#group")),d++},delGroup:function(a){c.remove("#groupTr-"+a)},change:function(a,b){var d=a.options[a.selectedIndex].value,e=function(a){var b=a.payload.flag,d=a.payload.groupTrId;d&&(b?c.css("#content-"+d,"display","block"):c.css("#content-"+d,"display","none"))},f=function(a){new H.widget.msgBox({title:"\u9519\u8bef\u63d0\u793a",content:a.desc,type:"error"})},g="param_id="+d+"&groupTr_id="+b;(new H.widget.asyncRequest).setURI(changeuri).setMethod("POST").setHandle(e).setErrorHandle(f).setData(g).send()}}},{requires:["overlay"]}); 